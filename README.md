# Мониторинг производительности IBM/Lenovo SVC/Storwize

Программа позволяет собирать статистику по производительности с СХД, обрабатывать ее и выгружать в базу данных InfluxDB.

Далее, используя, к примеру, Grafana (https://grafana.com/), можно настроить отображение собранных данных.

На данный момент поддерживается сбор всех параметров статистики по mdisk и vdisk.

* **svc.rb** - основная программа. В начале файла необходимо в переменных задать необходимые параметры.

Для сбора файлов со статистикой на Windows можно создать файлик со следующим содержимом:
```
pscp.exe -unsafe -l username -pw password XXX.XXX.XXX.XXX:/dumps/iostats/* .\
plink -l username -pw password XXX.XXX.XXX.XXX "cleardumps -prefix /dumps/iostats"
```

В нем используется plink и pscp от PuTTY (http://www.putty.org/). 
Файл необходимо добавить в планировщик Windows для автоматического периодического сбора данных.

На linux можно использовать стандартные клиенты ssh и scp для этой задачи:
```
scp XXX.XXX.XXX.XXX:/dumps/iostats/* /opt/svc/iostat/
ssh XXX.XXX.XXX.XXX "cleardumps -prefix /dumps/iostats"
```
В данном случае необходимо создать на СХД пользователя с ключом SSH. 

Также, необходимо на самой СХД включить сбор статистики командой `startstats -interval XXX`, где `XXX` - периодичность в минутах, с которой файлы статистики будут создаваться.